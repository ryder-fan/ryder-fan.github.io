class Loader{static imgs={};constructor(){}static setCookie(cname,cvalue,exdays){var d=new Date;d.setTime(d.getTime()+24*exdays*60*60*1e3);var expires="expires="+d.toGMTString();document.cookie=cname+"="+cvalue+"; "+expires}static getCookie(cname){for(var name=cname+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){var c=ca[i].trim();if(0==c.indexOf(name))return c.substring(name.length,c.length)}return""}static getImg(name){return this.imgs[name]?this.imgs[name]:""}static async loadImgs(whenFinish){const loader_container=document.getElementById("loader-container"),loadingbar=document.getElementById("loadingbar"),loadingtext=document.getElementById("loadingtext"),loadingimg=document.getElementById("loadingimg");let startTick=Date.now(),solve;console.log("Start load imgs...");let index=0,allImgNum=Object.keys(this.imgs).length;for(let name in this.imgs)loadingimg.src=this.imgs[name],loadingimg.onload=function(){index++,loadingbar.style.width=index/allImgNum*100+"%",loadingtext.textContent="Loading ("+index+"/"+allImgNum+") ...",solve()},loadingimg.onerror=function(){console.warn("error load img: "+name),index++,loadingbar.style.width=index/allImgNum*100+"%",loadingtext.textContent="Loading ("+index+"/"+allImgNum+") ...",solve()},await new Promise(resolve=>solve=resolve);loader_container.parentNode&&loader_container.parentNode.removeChild(loader_container),console.log("Load imgs done, time: "+(Date.now()-startTick)+"ms");const imgs=this.imgs;whenFinish&&setTimeout(whenFinish,100)}}